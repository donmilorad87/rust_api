{"version":3,"file":"app.js","sources":["../../../frontend/pages/UPLOADS/src/AssetPreview.js","../../../frontend/pages/UPLOADS/src/AssetInfoModal.js","../../../frontend/pages/UPLOADS/src/ImageLightbox.js","../../../frontend/pages/UPLOADS/src/UploadModal.js","../../../frontend/pages/UPLOADS/src/UploadsPage.js","../../../frontend/pages/UPLOADS/src/main.js"],"sourcesContent":["/**\n * AssetPreview Component\n *\n * Renders asset preview cards with thumbnails for images/videos\n * and appropriate icons for other file types.\n */\n\nexport class AssetPreview {\n  /**\n   * @param {Object} upload - Upload data\n   * @param {string} baseUrl - Base URL for API requests\n   * @param {Function} onEditClick - Callback when Asset Info button is clicked\n   * @param {Function} onDeleteClick - Callback when Delete button is clicked\n   * @param {Function} onPreviewClick - Callback when preview is clicked\n   */\n  constructor(upload, baseUrl, onEditClick, onDeleteClick, onPreviewClick) {\n    this.upload = upload;\n    this.baseUrl = baseUrl;\n    this.onEditClick = onEditClick;\n    this.onDeleteClick = onDeleteClick;\n    this.onPreviewClick = onPreviewClick;\n  }\n\n  /**\n   * Render the asset card\n   * @returns {HTMLElement}\n   */\n  render() {\n    const card = document.createElement('div');\n    card.className = 'asset-card';\n    card.dataset.uuid = this.upload.uuid;\n\n    const isImage = this.isImageType(this.upload.mime_type);\n    const isVideo = this.isVideoType(this.upload.mime_type);\n    const isPDF = this.upload.mime_type === 'application/pdf';\n\n    const isPublic = this.upload.storage_type === 'public';\n    const downloadUrl = isPublic\n      ? `${this.baseUrl}/api/v1/upload/download/public/${this.upload.uuid}`\n      : `${this.baseUrl}/api/v1/upload/private/${this.upload.uuid}`;\n\n    // Preview section\n    const previewHtml = this.renderPreview(isImage, isVideo, isPDF, downloadUrl);\n\n    // Info section\n    const title = this.upload.title || this.upload.original_name;\n    const description = this.upload.description || '';\n    const sizeFormatted = this.formatBytes(this.upload.size_bytes);\n\n    card.innerHTML = `\n      <div class=\"asset-card__preview\">\n        ${previewHtml}\n        <div class=\"asset-card__overlay\">\n          <div class=\"asset-card__actions\">\n            <button class=\"btn btn--icon btn--edit\" title=\"Asset Info\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\n                <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\n              </svg>\n            </button>\n            <button class=\"btn btn--icon btn--delete\" title=\"Delete\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                <polyline points=\"3 6 5 6 21 6\"></polyline>\n                <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\n              </svg>\n            </button>\n          </div>\n        </div>\n      </div>\n      <div class=\"asset-card__info\">\n        <h3 class=\"asset-card__title\" title=\"${this.escapeHtml(title)}\">\n          ${this.escapeHtml(this.truncate(title, 30))}\n        </h3>\n        ${description ? `<p class=\"asset-card__description\" title=\"${this.escapeHtml(description)}\">${this.escapeHtml(this.truncate(description, 50))}</p>` : ''}\n        <div class=\"asset-card__meta\">\n          <span class=\"badge badge--${isPublic ? 'public' : 'private'}\">\n            ${this.upload.storage_type}\n          </span>\n          <span class=\"asset-card__size\">${sizeFormatted}</span>\n          <span class=\"asset-card__extension\">.${this.upload.extension}</span>\n        </div>\n      </div>\n    `;\n\n    // Bind events\n    const editBtn = card.querySelector('.btn--edit');\n    const deleteBtn = card.querySelector('.btn--delete');\n\n    editBtn.addEventListener('click', (e) => {\n      e.stopPropagation();\n      this.onEditClick(this.upload);\n    });\n\n    deleteBtn.addEventListener('click', (e) => {\n      e.stopPropagation();\n      this.onDeleteClick(this.upload.uuid);\n    });\n\n    // Click on card preview to open image\n    const preview = card.querySelector('.asset-card__preview');\n    preview.addEventListener('click', (e) => {\n      if (!e.target.closest('.btn')) {\n        if (this.onPreviewClick) {\n          this.onPreviewClick(this.upload, downloadUrl);\n        } else {\n          window.open(downloadUrl, '_blank');\n        }\n      }\n    });\n\n    return card;\n  }\n\n  /**\n   * Render preview based on file type\n   */\n  renderPreview(isImage, isVideo, isPDF, downloadUrl) {\n    if (isImage) {\n      return `<img src=\"${downloadUrl}\" alt=\"${this.escapeHtml(this.upload.title || this.upload.original_name)}\" class=\"asset-card__image\">`;\n    } else if (isVideo) {\n      return `\n        <video class=\"asset-card__video\" controls>\n          <source src=\"${downloadUrl}\" type=\"${this.upload.mime_type}\">\n          Your browser does not support the video tag.\n        </video>\n      `;\n    } else if (isPDF) {\n      return `\n        <div class=\"asset-card__icon asset-card__icon--pdf\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\">\n            <path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\"></path>\n            <polyline points=\"14 2 14 8 20 8\"></polyline>\n            <text x=\"12\" y=\"17\" text-anchor=\"middle\" font-size=\"6\" font-weight=\"bold\" fill=\"currentColor\">PDF</text>\n          </svg>\n        </div>\n      `;\n    } else {\n      // Generic file icon\n      const ext = this.upload.extension.toUpperCase();\n      return `\n        <div class=\"asset-card__icon asset-card__icon--file\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\">\n            <path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\"></path>\n            <polyline points=\"14 2 14 8 20 8\"></polyline>\n          </svg>\n          <span class=\"asset-card__icon-text\">${ext}</span>\n        </div>\n      `;\n    }\n  }\n\n  /**\n   * Check if MIME type is an image\n   */\n  isImageType(mimeType) {\n    return mimeType.startsWith('image/');\n  }\n\n  /**\n   * Check if MIME type is a video\n   */\n  isVideoType(mimeType) {\n    return mimeType.startsWith('video/');\n  }\n\n  /**\n   * Format bytes to human readable size\n   * @param {number} bytes\n   * @returns {string}\n   */\n  formatBytes(bytes) {\n    if (bytes === 0) return '0 B';\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];\n  }\n\n  /**\n   * Truncate string with ellipsis\n   * @param {string} str\n   * @param {number} maxLen\n   * @returns {string}\n   */\n  truncate(str, maxLen) {\n    if (!str) return '';\n    return str.length > maxLen ? str.substring(0, maxLen) + '...' : str;\n  }\n\n  /**\n   * Escape HTML to prevent XSS\n   * @param {string} str\n   * @returns {string}\n   */\n  escapeHtml(str) {\n    if (!str) return '';\n    const div = document.createElement('div');\n    div.textContent = str;\n    return div.innerHTML;\n  }\n}\n","/**\n * AssetInfoModal Component\n *\n * Modal dialog for editing asset title and description.\n * Title is used for aria-title attribute.\n * Description is used for alt attribute.\n */\n\nexport class AssetInfoModal {\n  /**\n   * @param {Object} options\n   * @param {string} options.baseUrl - Base URL for API requests\n   * @param {Function} options.showToast - Toast notification function\n   * @param {Function} options.onSave - Callback when metadata is saved\n   */\n  constructor(options) {\n    this.baseUrl = options.baseUrl;\n    this.showToast = options.showToast;\n    this.onSave = options.onSave;\n\n    this.modal = null;\n    this.currentUpload = null;\n\n    this.createModal();\n  }\n\n  /**\n   * Create the modal structure\n   */\n  createModal() {\n    this.modal = document.createElement('div');\n    this.modal.className = 'modal';\n    this.modal.id = 'assetInfoModal';\n    this.modal.style.display = 'none';\n\n    this.modal.innerHTML = `\n      <div class=\"modal__overlay\"></div>\n      <div class=\"modal__content\">\n        <div class=\"modal__header\">\n          <h2 class=\"modal__title\">Asset Information</h2>\n          <button class=\"modal__close\" type=\"button\" aria-label=\"Close\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n            </svg>\n          </button>\n        </div>\n        <div class=\"modal__body\">\n          <form id=\"assetInfoForm\" class=\"asset-info-form\">\n            <div class=\"form-group\">\n              <label for=\"assetTitle\" class=\"form-label\">\n                Title\n                <span class=\"form-hint\">(Used for aria-title attribute)</span>\n              </label>\n              <input\n                type=\"text\"\n                id=\"assetTitle\"\n                name=\"title\"\n                class=\"form-input\"\n                maxlength=\"255\"\n                placeholder=\"Enter asset title\"\n              >\n              <small class=\"form-help\">Leave empty to use filename</small>\n            </div>\n\n            <div class=\"form-group\">\n              <label for=\"assetDescription\" class=\"form-label\">\n                Description\n                <span class=\"form-hint\">(Used for alt attribute)</span>\n              </label>\n              <textarea\n                id=\"assetDescription\"\n                name=\"description\"\n                class=\"form-textarea\"\n                rows=\"4\"\n                maxlength=\"500\"\n                placeholder=\"Enter asset description\"\n              ></textarea>\n              <small class=\"form-help\">Describe what this asset shows or represents</small>\n            </div>\n\n            <div class=\"form-group\">\n              <label class=\"form-label\">\n                Storage Type\n              </label>\n              <div class=\"toggle-group\">\n                <label class=\"toggle-option\">\n                  <input type=\"radio\" name=\"storageType\" value=\"public\" id=\"storagePublic\">\n                  <span class=\"toggle-option__label\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                      <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n                      <path d=\"M12 6v6l4 2\"></path>\n                    </svg>\n                    Public\n                  </span>\n                  <small class=\"toggle-option__hint\">Accessible via direct URL</small>\n                </label>\n                <label class=\"toggle-option\">\n                  <input type=\"radio\" name=\"storageType\" value=\"private\" id=\"storagePrivate\">\n                  <span class=\"toggle-option__label\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                      <rect x=\"3\" y=\"11\" width=\"18\" height=\"11\" rx=\"2\" ry=\"2\"></rect>\n                      <path d=\"M7 11V7a5 5 0 0 1 10 0v4\"></path>\n                    </svg>\n                    Private\n                  </span>\n                  <small class=\"toggle-option__hint\">Requires authentication</small>\n                </label>\n              </div>\n            </div>\n\n            <div class=\"asset-info-form__preview\">\n              <strong>File:</strong> <span id=\"assetFileName\"></span>\n            </div>\n            <div class=\"asset-info-form__preview\">\n              <strong>Type:</strong> <span id=\"assetFileType\"></span>\n            </div>\n            <div class=\"asset-info-form__preview\">\n              <strong>UUID:</strong> <span id=\"assetUUID\"></span>\n            </div>\n          </form>\n        </div>\n        <div class=\"modal__footer\">\n          <button type=\"button\" class=\"btn btn--secondary modal__cancel\">Cancel</button>\n          <button type=\"submit\" form=\"assetInfoForm\" class=\"btn btn--primary\">\n            Save Changes\n          </button>\n        </div>\n      </div>\n    `;\n\n    document.body.appendChild(this.modal);\n    this.bindEvents();\n  }\n\n  /**\n   * Bind modal events\n   */\n  bindEvents() {\n    const overlay = this.modal.querySelector('.modal__overlay');\n    const closeBtn = this.modal.querySelector('.modal__close');\n    const cancelBtn = this.modal.querySelector('.modal__cancel');\n    const form = this.modal.querySelector('#assetInfoForm');\n\n    // Close modal on overlay click\n    overlay.addEventListener('click', () => this.close());\n\n    // Close modal on close button click\n    closeBtn.addEventListener('click', () => this.close());\n\n    // Close modal on cancel button click\n    cancelBtn.addEventListener('click', () => this.close());\n\n    // Handle form submission\n    form.addEventListener('submit', (e) => {\n      e.preventDefault();\n      this.save();\n    });\n\n    // Close on Escape key\n    document.addEventListener('keydown', (e) => {\n      if (e.key === 'Escape' && this.modal.style.display === 'flex') {\n        this.close();\n      }\n    });\n  }\n\n  /**\n   * Open modal with upload data\n   * @param {Object} upload - Upload data\n   */\n  open(upload) {\n    this.currentUpload = upload;\n\n    // Populate form fields\n    document.getElementById('assetTitle').value = upload.title || '';\n    document.getElementById('assetDescription').value = upload.description || '';\n    document.getElementById('assetFileName').textContent = upload.original_name;\n    document.getElementById('assetFileType').textContent = upload.mime_type;\n    document.getElementById('assetUUID').textContent = upload.uuid;\n\n    // Set storage type radio button\n    if (upload.storage_type === 'public') {\n      document.getElementById('storagePublic').checked = true;\n    } else {\n      document.getElementById('storagePrivate').checked = true;\n    }\n\n    // Show modal\n    this.modal.style.display = 'flex';\n    document.body.style.overflow = 'hidden'; // Prevent background scroll\n\n    // Focus title input\n    setTimeout(() => {\n      document.getElementById('assetTitle').focus();\n    }, 100);\n  }\n\n  /**\n   * Close modal\n   */\n  close() {\n    this.modal.style.display = 'none';\n    document.body.style.overflow = ''; // Restore scroll\n    this.currentUpload = null;\n\n    // Clear form\n    document.getElementById('assetInfoForm').reset();\n  }\n\n  /**\n   * Save metadata changes\n   */\n  async save() {\n    if (!this.currentUpload) return;\n\n    const title = document.getElementById('assetTitle').value.trim();\n    const description = document.getElementById('assetDescription').value.trim();\n    const storageType = document.querySelector('input[name=\"storageType\"]:checked').value;\n\n    const payload = {\n      title: title || null,\n      description: description || null,\n      storage_type: storageType\n    };\n\n    try {\n      const response = await fetch(\n        `${this.baseUrl}/api/v1/admin/uploads/${this.currentUpload.uuid}/metadata`,\n        {\n          method: 'PATCH',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          credentials: 'include',\n          body: JSON.stringify(payload)\n        }\n      );\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Failed to update asset metadata');\n      }\n\n      const data = await response.json();\n\n      if (data.status === 'success') {\n        this.showToast('Asset metadata updated successfully', 'success');\n        this.close();\n\n        // Call onSave callback to refresh the list\n        if (this.onSave) {\n          this.onSave();\n        }\n      } else {\n        throw new Error(data.message || 'Failed to update asset metadata');\n      }\n    } catch (error) {\n      console.error('Error updating asset metadata:', error);\n      this.showToast(error.message || 'Failed to update asset metadata', 'error');\n    }\n  }\n\n  /**\n   * Destroy modal and remove from DOM\n   */\n  destroy() {\n    if (this.modal && this.modal.parentElement) {\n      this.modal.parentElement.removeChild(this.modal);\n    }\n    this.modal = null;\n    this.currentUpload = null;\n  }\n}\n","/**\n * ImageLightbox Component\n *\n * Displays images in a fullscreen lightbox overlay\n */\n\nexport class ImageLightbox {\n  constructor() {\n    this.currentImage = null;\n    this.lightboxEl = null;\n  }\n\n  /**\n   * Open lightbox with an image\n   * @param {string} imageUrl - URL of the image to display\n   * @param {string} title - Image title/name\n   */\n  open(imageUrl, title = '') {\n    this.currentImage = { url: imageUrl, title };\n    this.render();\n    document.body.style.overflow = 'hidden';\n  }\n\n  /**\n   * Close the lightbox\n   */\n  close() {\n    if (this.lightboxEl) {\n      this.lightboxEl.remove();\n      this.lightboxEl = null;\n      document.body.style.overflow = '';\n    }\n  }\n\n  /**\n   * Render the lightbox\n   */\n  render() {\n    // Remove existing lightbox if any\n    this.close();\n\n    // Create lightbox\n    this.lightboxEl = document.createElement('div');\n    this.lightboxEl.className = 'lightbox';\n    this.lightboxEl.innerHTML = `\n      <div class=\"lightbox__overlay\"></div>\n      <div class=\"lightbox__content\">\n        <button class=\"lightbox__close\" title=\"Close (Esc)\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n            <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n            <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n          </svg>\n        </button>\n        <div class=\"lightbox__image-container\">\n          <img src=\"${this.currentImage.url}\" alt=\"${this.escapeHtml(this.currentImage.title)}\" class=\"lightbox__image\">\n        </div>\n        ${this.currentImage.title ? `<div class=\"lightbox__title\">${this.escapeHtml(this.currentImage.title)}</div>` : ''}\n        <a href=\"${this.currentImage.url}\" download class=\"lightbox__download\" title=\"Download\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n            <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"></path>\n            <polyline points=\"7 10 12 15 17 10\"></polyline>\n            <line x1=\"12\" y1=\"15\" x2=\"12\" y2=\"3\"></line>\n          </svg>\n        </a>\n      </div>\n    `;\n\n    document.body.appendChild(this.lightboxEl);\n\n    // Bind events\n    this.bindEvents();\n  }\n\n  /**\n   * Bind event listeners\n   */\n  bindEvents() {\n    // Close button\n    const closeBtn = this.lightboxEl.querySelector('.lightbox__close');\n    closeBtn.addEventListener('click', () => this.close());\n\n    // Overlay click\n    const overlay = this.lightboxEl.querySelector('.lightbox__overlay');\n    overlay.addEventListener('click', () => this.close());\n\n    // ESC key\n    const escHandler = (e) => {\n      if (e.key === 'Escape') {\n        this.close();\n        document.removeEventListener('keydown', escHandler);\n      }\n    };\n    document.addEventListener('keydown', escHandler);\n\n    // Prevent closing when clicking on image\n    const imageContainer = this.lightboxEl.querySelector('.lightbox__image-container');\n    imageContainer.addEventListener('click', (e) => e.stopPropagation());\n  }\n\n  /**\n   * Escape HTML to prevent XSS\n   * @param {string} str\n   * @returns {string}\n   */\n  escapeHtml(str) {\n    if (!str) return '';\n    const div = document.createElement('div');\n    div.textContent = str;\n    return div.innerHTML;\n  }\n}\n","/**\n * UploadModal Component\n *\n * Two-step upload process:\n * 1. Select and upload file\n * 2. Fill in metadata (title, description, storage type)\n */\n\nexport class UploadModal {\n  /**\n   * @param {Object} options\n   * @param {string} options.baseUrl - Base URL for API requests\n   * @param {Function} options.showToast - Toast notification function\n   * @param {Function} options.onComplete - Callback when upload completes\n   */\n  constructor(options) {\n    this.baseUrl = options.baseUrl;\n    this.showToast = options.showToast;\n    this.onComplete = options.onComplete;\n    this.modalEl = null;\n    this.uploadedFile = null;\n    this.currentStep = 1; // 1: upload, 2: metadata\n  }\n\n  /**\n   * Open the modal\n   */\n  open() {\n    this.currentStep = 1;\n    this.uploadedFile = null;\n    this.render();\n  }\n\n  /**\n   * Close the modal\n   */\n  close() {\n    if (this.modalEl) {\n      this.modalEl.remove();\n      this.modalEl = null;\n    }\n  }\n\n  /**\n   * Render the modal\n   */\n  render() {\n    // Remove existing modal if any\n    this.close();\n\n    // Create modal\n    this.modalEl = document.createElement('div');\n    this.modalEl.className = 'modal';\n    this.modalEl.innerHTML = `\n      <div class=\"modal__overlay\"></div>\n      <div class=\"modal__content\">\n        <div class=\"modal__header\">\n          <h2 class=\"modal__title\">${this.currentStep === 1 ? 'Upload File' : 'File Metadata'}</h2>\n          <button class=\"modal__close\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n            </svg>\n          </button>\n        </div>\n        <div class=\"modal__body\">\n          ${this.currentStep === 1 ? this.renderUploadStep() : this.renderMetadataStep()}\n        </div>\n      </div>\n    `;\n\n    document.body.appendChild(this.modalEl);\n\n    // Bind events\n    this.bindEvents();\n  }\n\n  /**\n   * Render upload step\n   * @returns {string} HTML string\n   */\n  renderUploadStep() {\n    return `\n      <div class=\"upload-step\">\n        <div class=\"file-dropzone\" id=\"fileDropzone\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\">\n            <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"></path>\n            <polyline points=\"17 8 12 3 7 8\"></polyline>\n            <line x1=\"12\" y1=\"3\" x2=\"12\" y2=\"15\"></line>\n          </svg>\n          <p class=\"file-dropzone__text\">\n            <strong>Click to browse</strong> or drag and drop your file here\n          </p>\n          <p class=\"file-dropzone__hint\">Supported: Images, PDFs, Documents</p>\n          <input type=\"file\" id=\"fileInput\" class=\"file-dropzone__input\" accept=\"image/*,application/pdf,.doc,.docx,.txt\">\n        </div>\n        <div id=\"uploadProgress\" class=\"upload-progress\" style=\"display: none;\">\n          <div class=\"upload-progress__bar\">\n            <div class=\"upload-progress__fill\" id=\"progressFill\"></div>\n          </div>\n          <p class=\"upload-progress__text\" id=\"progressText\">Uploading...</p>\n        </div>\n      </div>\n    `;\n  }\n\n  /**\n   * Render metadata step\n   * @returns {string} HTML string\n   */\n  renderMetadataStep() {\n    // Generate preview URL for the uploaded file\n    const isPublic = this.uploadedFile.storage_type === 'public';\n    const previewUrl = isPublic\n      ? `${this.baseUrl}/api/v1/upload/download/public/${this.uploadedFile.uuid}`\n      : `${this.baseUrl}/api/v1/upload/private/${this.uploadedFile.uuid}`;\n\n    // Check if file is an image\n    const isImage = this.uploadedFile.mime_type && this.uploadedFile.mime_type.startsWith('image/');\n\n    return `\n      <form class=\"upload-metadata-form\" id=\"metadataForm\">\n        <div class=\"upload-metadata-form__preview\">\n          ${isImage ? `\n            <div class=\"upload-preview-image\">\n              <img src=\"${previewUrl}\" alt=\"${this.escapeHtml(this.uploadedFile.original_name)}\" />\n            </div>\n          ` : `\n            <div class=\"upload-preview-file\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                <path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\"></path>\n                <polyline points=\"14 2 14 8 20 8\"></polyline>\n              </svg>\n            </div>\n          `}\n          <div class=\"upload-preview-info\">\n            <strong>File:</strong> ${this.escapeHtml(this.uploadedFile.original_name)}\n          </div>\n        </div>\n\n        <div class=\"form-group\">\n          <label class=\"form-label\" for=\"uploadTitle\">\n            Title <span class=\"form-hint\">(optional)</span>\n          </label>\n          <input\n            type=\"text\"\n            id=\"uploadTitle\"\n            class=\"form-input\"\n            placeholder=\"Enter a descriptive title\"\n            value=\"${this.escapeHtml(this.uploadedFile.original_name)}\"\n          >\n        </div>\n\n        <div class=\"form-group\">\n          <label class=\"form-label\" for=\"uploadDescription\">\n            Description <span class=\"form-hint\">(optional)</span>\n          </label>\n          <textarea\n            id=\"uploadDescription\"\n            class=\"form-textarea\"\n            placeholder=\"Enter a description or alt text\"\n            rows=\"3\"\n          ></textarea>\n          <small class=\"form-help\">Used for accessibility and SEO</small>\n        </div>\n\n        <div class=\"form-group\">\n          <label class=\"form-label\">\n            Storage Type\n          </label>\n          <div class=\"toggle-group\">\n            <label class=\"toggle-option\">\n              <input type=\"radio\" name=\"storageType\" value=\"public\" checked>\n              <span class=\"toggle-option__label\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                  <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n                  <path d=\"M12 6v6l4 2\"></path>\n                </svg>\n                Public\n              </span>\n              <small class=\"toggle-option__hint\">Accessible via direct URL</small>\n            </label>\n            <label class=\"toggle-option\">\n              <input type=\"radio\" name=\"storageType\" value=\"private\">\n              <span class=\"toggle-option__label\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                  <rect x=\"3\" y=\"11\" width=\"18\" height=\"11\" rx=\"2\" ry=\"2\"></rect>\n                  <path d=\"M7 11V7a5 5 0 0 1 10 0v4\"></path>\n                </svg>\n                Private\n              </span>\n              <small class=\"toggle-option__hint\">Requires authentication</small>\n            </label>\n          </div>\n        </div>\n\n        <div class=\"modal__footer\">\n          <button type=\"button\" class=\"btn btn--secondary\" id=\"cancelMetadata\">Cancel</button>\n          <button type=\"submit\" class=\"btn btn--primary\">Save & Finish</button>\n        </div>\n      </form>\n    `;\n  }\n\n  /**\n   * Bind event listeners\n   */\n  bindEvents() {\n    // Close button\n    const closeBtn = this.modalEl.querySelector('.modal__close');\n    closeBtn.addEventListener('click', () => this.close());\n\n    // Overlay click\n    const overlay = this.modalEl.querySelector('.modal__overlay');\n    overlay.addEventListener('click', () => this.close());\n\n    if (this.currentStep === 1) {\n      this.bindUploadStepEvents();\n    } else {\n      this.bindMetadataStepEvents();\n    }\n  }\n\n  /**\n   * Bind upload step events\n   */\n  bindUploadStepEvents() {\n    const dropzone = this.modalEl.querySelector('#fileDropzone');\n    const fileInput = this.modalEl.querySelector('#fileInput');\n\n    // Click to browse\n    dropzone.addEventListener('click', () => fileInput.click());\n\n    // File selection\n    fileInput.addEventListener('change', (e) => {\n      if (e.target.files.length > 0) {\n        this.uploadFile(e.target.files[0]);\n      }\n    });\n\n    // Drag and drop\n    dropzone.addEventListener('dragover', (e) => {\n      e.preventDefault();\n      dropzone.classList.add('file-dropzone--dragover');\n    });\n\n    dropzone.addEventListener('dragleave', () => {\n      dropzone.classList.remove('file-dropzone--dragover');\n    });\n\n    dropzone.addEventListener('drop', (e) => {\n      e.preventDefault();\n      dropzone.classList.remove('file-dropzone--dragover');\n\n      if (e.dataTransfer.files.length > 0) {\n        this.uploadFile(e.dataTransfer.files[0]);\n      }\n    });\n  }\n\n  /**\n   * Bind metadata step events\n   */\n  bindMetadataStepEvents() {\n    const form = this.modalEl.querySelector('#metadataForm');\n    const cancelBtn = this.modalEl.querySelector('#cancelMetadata');\n\n    form.addEventListener('submit', (e) => {\n      e.preventDefault();\n      this.saveMetadata();\n    });\n\n    cancelBtn.addEventListener('click', () => this.close());\n  }\n\n  /**\n   * Upload file to server\n   * @param {File} file\n   */\n  async uploadFile(file) {\n    const dropzone = this.modalEl.querySelector('#fileDropzone');\n    const progress = this.modalEl.querySelector('#uploadProgress');\n    const progressFill = this.modalEl.querySelector('#progressFill');\n    const progressText = this.modalEl.querySelector('#progressText');\n\n    dropzone.style.display = 'none';\n    progress.style.display = 'block';\n\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('storage_type', 'public'); // Default, can be changed in step 2\n\n      const xhr = new XMLHttpRequest();\n\n      // Progress tracking\n      xhr.upload.addEventListener('progress', (e) => {\n        if (e.lengthComputable) {\n          const percent = (e.loaded / e.total) * 100;\n          progressFill.style.width = percent + '%';\n          progressText.textContent = `Uploading... ${Math.round(percent)}%`;\n        }\n      });\n\n      // Response handling\n      xhr.addEventListener('load', () => {\n        if (xhr.status === 200 || xhr.status === 201) {\n          const response = JSON.parse(xhr.responseText);\n          if (response.status === 'success') {\n            this.uploadedFile = response.upload;\n            this.currentStep = 2;\n            this.showToast('File uploaded successfully!', 'success');\n            this.render();\n          } else {\n            throw new Error(response.message || 'Upload failed');\n          }\n        } else {\n          throw new Error('Upload failed');\n        }\n      });\n\n      xhr.addEventListener('error', () => {\n        throw new Error('Network error during upload');\n      });\n\n      xhr.open('POST', `${this.baseUrl}/api/v1/upload/public`);\n      xhr.withCredentials = true;\n      xhr.send(formData);\n\n    } catch (error) {\n      console.error('Upload error:', error);\n      this.showToast(error.message || 'Failed to upload file', 'error');\n      dropzone.style.display = 'flex';\n      progress.style.display = 'none';\n    }\n  }\n\n  /**\n   * Save metadata and finish\n   */\n  async saveMetadata() {\n    const title = this.modalEl.querySelector('#uploadTitle').value.trim();\n    const description = this.modalEl.querySelector('#uploadDescription').value.trim();\n    const storageType = this.modalEl.querySelector('input[name=\"storageType\"]:checked').value;\n\n    try {\n      const response = await fetch(`${this.baseUrl}/api/v1/admin/uploads/${this.uploadedFile.uuid}/metadata`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          title: title || null,\n          description: description || null,\n          storage_type: storageType\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to save metadata');\n      }\n\n      const data = await response.json();\n\n      if (data.status === 'success') {\n        this.showToast('Upload completed successfully!', 'success');\n        this.close();\n        if (this.onComplete) {\n          this.onComplete();\n        }\n      } else {\n        throw new Error(data.message || 'Failed to save metadata');\n      }\n    } catch (error) {\n      console.error('Save metadata error:', error);\n      this.showToast('Failed to save metadata', 'error');\n    }\n  }\n\n  /**\n   * Escape HTML to prevent XSS\n   * @param {string} str\n   * @returns {string}\n   */\n  escapeHtml(str) {\n    if (!str) return '';\n    const div = document.createElement('div');\n    div.textContent = str;\n    return div.innerHTML;\n  }\n}\n","/**\n * UploadsPage Controller\n *\n * Handles admin uploads management functionality:\n * - Display all uploads in grid or table view\n * - Filter/search uploads\n * - Delete uploads\n * - Edit metadata (title/description)\n * - Pagination\n */\n\nimport { AssetPreview } from './AssetPreview.js';\nimport { AssetInfoModal } from './AssetInfoModal.js';\nimport { ImageLightbox } from './ImageLightbox.js';\nimport { UploadModal } from './UploadModal.js';\n\nexport class UploadsPage {\n  /**\n   * @param {Object} options\n   * @param {string} options.baseUrl - Base URL for API requests\n   * @param {HTMLElement} options.uploadsTable - Table body element\n   * @param {HTMLElement} options.uploadsGrid - Grid container element\n   * @param {HTMLElement} options.pagination - Pagination container\n   * @param {Function} options.showToast - Toast notification function\n   */\n  constructor(options) {\n    this.baseUrl = options.baseUrl;\n    this.uploadsTable = options.uploadsTable;\n    this.uploadsGrid = options.uploadsGrid;\n    this.pagination = options.pagination;\n    this.showToast = options.showToast;\n\n    // State\n    this.currentPage = 1;\n    this.itemsPerPage = 20;\n    this.uploads = [];\n    this.totalUploads = 0;\n    this.viewMode = 'grid'; // 'grid' or 'table'\n\n    // Initialize modals\n    this.modal = new AssetInfoModal({\n      baseUrl: this.baseUrl,\n      showToast: this.showToast,\n      onSave: () => this.loadUploads()\n    });\n\n    this.lightbox = new ImageLightbox();\n\n    this.uploadModal = new UploadModal({\n      baseUrl: this.baseUrl,\n      showToast: this.showToast,\n      onComplete: () => this.loadUploads()\n    });\n\n    this.init();\n  }\n\n  /**\n   * Initialize the page\n   */\n  init() {\n    this.bindEvents();\n    this.loadUploads();\n  }\n\n  /**\n   * Bind event listeners\n   */\n  bindEvents() {\n    // Upload button\n    const uploadBtn = document.getElementById('uploadBtn');\n    if (uploadBtn) {\n      uploadBtn.addEventListener('click', () => {\n        this.uploadModal.open();\n      });\n    }\n\n    // View mode toggle\n    const viewToggle = document.getElementById('viewToggle');\n    if (viewToggle) {\n      viewToggle.addEventListener('change', (e) => {\n        this.viewMode = e.target.value;\n        this.renderView();\n      });\n    }\n\n    // Action buttons (delegated - table view)\n    this.uploadsTable.addEventListener('click', (e) => {\n      const deleteBtn = e.target.closest('[data-action=\"delete\"]');\n      if (deleteBtn) {\n        const uuid = deleteBtn.dataset.uuid;\n        this.confirmDelete(uuid);\n      }\n\n      const editBtn = e.target.closest('[data-action=\"edit\"]');\n      if (editBtn) {\n        const uuid = editBtn.dataset.uuid;\n        const upload = this.uploads.find(u => u.uuid === uuid);\n        if (upload) {\n          this.modal.open(upload);\n        }\n      }\n    });\n\n    // Search input\n    const searchInput = document.getElementById('searchInput');\n    if (searchInput) {\n      let debounceTimer;\n      searchInput.addEventListener('input', (e) => {\n        clearTimeout(debounceTimer);\n        debounceTimer = setTimeout(() => {\n          this.currentPage = 1;\n          this.loadUploads(e.target.value);\n        }, 300);\n      });\n    }\n\n    // Filter select\n    const filterSelect = document.getElementById('filterStorage');\n    if (filterSelect) {\n      filterSelect.addEventListener('change', () => {\n        this.currentPage = 1;\n        this.loadUploads();\n      });\n    }\n  }\n\n  /**\n   * Load uploads from API\n   * @param {string} search - Search term\n   */\n  async loadUploads(search = '') {\n    try {\n      const offset = (this.currentPage - 1) * this.itemsPerPage;\n      const params = new URLSearchParams({\n        limit: this.itemsPerPage,\n        offset: offset\n      });\n\n      // Add storage type filter if not \"all\"\n      const filterSelect = document.getElementById('filterStorage');\n      if (filterSelect && filterSelect.value && filterSelect.value !== 'all') {\n        params.append('storage_type', filterSelect.value);\n      }\n\n      // Add search term if provided\n      const searchInput = document.getElementById('searchInput');\n      const searchTerm = search || (searchInput ? searchInput.value : '');\n      if (searchTerm) {\n        params.append('search', searchTerm);\n      }\n\n      const response = await fetch(`${this.baseUrl}/api/v1/admin/uploads?${params}`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include'\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to load uploads');\n      }\n\n      const data = await response.json();\n\n      if (data.status === 'success') {\n        this.uploads = data.uploads || [];\n        this.totalUploads = data.total || 0;\n        this.renderView();\n        this.renderPagination();\n      } else {\n        throw new Error(data.message || 'Failed to load uploads');\n      }\n    } catch (error) {\n      console.error('Error loading uploads:', error);\n      this.showToast('Failed to load uploads', 'error');\n      this.renderEmptyState();\n    }\n  }\n\n  /**\n   * Render view based on current mode\n   */\n  renderView() {\n    if (this.uploads.length === 0) {\n      this.renderEmptyState();\n      return;\n    }\n\n    if (this.viewMode === 'grid') {\n      this.renderGrid();\n    } else {\n      this.renderTable();\n    }\n  }\n\n  /**\n   * Render the uploads grid\n   */\n  renderGrid() {\n    // Hide table, show grid\n    if (this.uploadsTable.parentElement) {\n      this.uploadsTable.parentElement.parentElement.style.display = 'none';\n    }\n    if (this.uploadsGrid) {\n      this.uploadsGrid.style.display = 'grid';\n      this.uploadsGrid.innerHTML = '';\n\n      this.uploads.forEach(upload => {\n        const preview = new AssetPreview(\n          upload,\n          this.baseUrl,\n          (upload) => this.modal.open(upload),\n          (uuid) => this.confirmDelete(uuid),\n          (upload, downloadUrl) => this.handlePreviewClick(upload, downloadUrl)\n        );\n        this.uploadsGrid.appendChild(preview.render());\n      });\n    }\n  }\n\n  /**\n   * Handle preview click - open images in lightbox, others in new tab\n   * @param {Object} upload - Upload data\n   * @param {string} downloadUrl - Download URL\n   */\n  handlePreviewClick(upload, downloadUrl) {\n    // Check if it's an image\n    if (upload.mime_type.startsWith('image/')) {\n      // Open in lightbox\n      const title = upload.title || upload.original_name;\n      this.lightbox.open(downloadUrl, title);\n    } else {\n      // Open in new tab for non-images\n      window.open(downloadUrl, '_blank');\n    }\n  }\n\n  /**\n   * Render the uploads table\n   */\n  renderTable() {\n    // Hide grid, show table\n    if (this.uploadsGrid) {\n      this.uploadsGrid.style.display = 'none';\n    }\n    if (this.uploadsTable.parentElement) {\n      this.uploadsTable.parentElement.parentElement.style.display = 'block';\n    }\n\n    const rows = this.uploads.map(upload => this.createRow(upload)).join('');\n    this.uploadsTable.innerHTML = rows;\n\n    // Add delegated click handlers for thumbnails\n    this.uploadsTable.querySelectorAll('.thumbnail-link').forEach(link => {\n      link.addEventListener('click', (e) => {\n        e.preventDefault();\n        const uuid = e.currentTarget.dataset.uuid;\n        const upload = this.uploads.find(u => u.uuid === uuid);\n        if (upload) {\n          const isPublic = upload.storage_type === 'public';\n          const downloadUrl = isPublic\n            ? `${this.baseUrl}/api/v1/upload/download/public/${upload.uuid}`\n            : `${this.baseUrl}/api/v1/upload/private/${upload.uuid}`;\n          this.handlePreviewClick(upload, downloadUrl);\n        }\n      });\n    });\n  }\n\n  /**\n   * Create a table row for an upload\n   * @param {Object} upload - Upload data\n   * @returns {string} HTML string\n   */\n  createRow(upload) {\n    const isPublic = upload.storage_type === 'public';\n    const downloadUrl = isPublic\n      ? `${this.baseUrl}/api/v1/upload/download/public/${upload.uuid}`\n      : `${this.baseUrl}/api/v1/upload/private/${upload.uuid}`;\n\n    const sizeFormatted = this.formatBytes(upload.size_bytes);\n    const dateFormatted = new Date(upload.created_at).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n\n    const statusClass = upload.upload_status === 'completed' ? 'status--success' : 'status--pending';\n\n    // Determine if file is an image\n    const isImage = upload.mime_type.startsWith('image/');\n    const thumbnailHtml = isImage\n      ? `<img src=\"${downloadUrl}\" alt=\"${upload.original_name}\" class=\"table-thumbnail\" />`\n      : `<div class=\"table-thumbnail table-thumbnail--icon\">\n           <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n             <path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\"></path>\n             <polyline points=\"14 2 14 8 20 8\"></polyline>\n           </svg>\n         </div>`;\n\n    return `\n      <tr class=\"uploads-table__row\">\n        <td class=\"uploads-table__cell uploads-table__cell--thumbnail\" data-label=\"Preview\">\n          <a href=\"${downloadUrl}\" data-uuid=\"${upload.uuid}\" class=\"thumbnail-link\">${thumbnailHtml}</a>\n        </td>\n        <td class=\"uploads-table__cell uploads-table__cell--uuid\" data-label=\"UUID\" title=\"${upload.uuid}\">\n          ${upload.uuid.substring(0, 8)}...\n        </td>\n        <td class=\"uploads-table__cell uploads-table__cell--name\" data-label=\"Name\" title=\"${upload.original_name}\">\n          ${this.truncate(upload.original_name, 30)}\n        </td>\n        <td class=\"uploads-table__cell uploads-table__cell--type\" data-label=\"Storage\">\n          <span class=\"badge badge--${isPublic ? 'public' : 'private'}\">\n            ${upload.storage_type}\n          </span>\n        </td>\n        <td class=\"uploads-table__cell uploads-table__cell--mime\" data-label=\"Type\">\n          ${upload.mime_type}\n        </td>\n        <td class=\"uploads-table__cell uploads-table__cell--size\" data-label=\"Size\">\n          ${sizeFormatted}\n        </td>\n        <td class=\"uploads-table__cell uploads-table__cell--status\" data-label=\"Status\">\n          <span class=\"status ${statusClass}\">${upload.upload_status}</span>\n        </td>\n        <td class=\"uploads-table__cell uploads-table__cell--user\" data-label=\"User ID\">\n          ${upload.user_id || 'N/A'}\n        </td>\n        <td class=\"uploads-table__cell uploads-table__cell--date\" data-label=\"Date\">\n          ${dateFormatted}\n        </td>\n        <td class=\"uploads-table__cell uploads-table__cell--actions\" data-label=\"Actions\">\n          <button class=\"btn btn--icon btn--edit\" data-action=\"edit\" data-uuid=\"${upload.uuid}\" title=\"Edit Info\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n              <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\n              <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\n            </svg>\n          </button>\n          <button class=\"btn btn--icon btn--delete\" data-action=\"delete\" data-uuid=\"${upload.uuid}\" title=\"Delete\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n              <polyline points=\"3 6 5 6 21 6\"></polyline>\n              <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\n            </svg>\n          </button>\n        </td>\n      </tr>\n    `;\n  }\n\n  /**\n   * Render empty state\n   */\n  renderEmptyState() {\n    this.uploadsTable.innerHTML = `\n      <tr>\n        <td colspan=\"10\" class=\"uploads-table__empty\">\n          <div class=\"empty-state\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1\">\n              <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"></path>\n              <polyline points=\"17 8 12 3 7 8\"></polyline>\n              <line x1=\"12\" y1=\"3\" x2=\"12\" y2=\"15\"></line>\n            </svg>\n            <p>No uploads found</p>\n          </div>\n        </td>\n      </tr>\n    `;\n  }\n\n  /**\n   * Render pagination controls\n   */\n  renderPagination() {\n    if (!this.pagination) return;\n\n    const totalPages = Math.ceil(this.totalUploads / this.itemsPerPage);\n\n    if (totalPages <= 1) {\n      this.pagination.innerHTML = '';\n      return;\n    }\n\n    let html = '<div class=\"pagination\">';\n\n    // Previous button\n    html += `\n      <button class=\"pagination__btn\" ${this.currentPage === 1 ? 'disabled' : ''} data-page=\"${this.currentPage - 1}\">\n        &laquo; Prev\n      </button>\n    `;\n\n    // Page numbers\n    const startPage = Math.max(1, this.currentPage - 2);\n    const endPage = Math.min(totalPages, this.currentPage + 2);\n\n    for (let i = startPage; i <= endPage; i++) {\n      html += `\n        <button class=\"pagination__btn ${i === this.currentPage ? 'pagination__btn--active' : ''}\" data-page=\"${i}\">\n          ${i}\n        </button>\n      `;\n    }\n\n    // Next button\n    html += `\n      <button class=\"pagination__btn\" ${this.currentPage === totalPages ? 'disabled' : ''} data-page=\"${this.currentPage + 1}\">\n        Next &raquo;\n      </button>\n    `;\n\n    html += '</div>';\n\n    this.pagination.innerHTML = html;\n\n    // Bind pagination events\n    this.pagination.querySelectorAll('[data-page]').forEach(btn => {\n      btn.addEventListener('click', () => {\n        const page = parseInt(btn.dataset.page, 10);\n        if (page >= 1 && page <= totalPages) {\n          this.currentPage = page;\n          this.loadUploads();\n        }\n      });\n    });\n  }\n\n  /**\n   * Confirm delete action\n   * @param {string} uuid - Upload UUID\n   */\n  confirmDelete(uuid) {\n    if (confirm('Are you sure you want to delete this upload? This action cannot be undone.')) {\n      this.deleteUpload(uuid);\n    }\n  }\n\n  /**\n   * Delete an upload\n   * @param {string} uuid - Upload UUID\n   */\n  async deleteUpload(uuid) {\n    try {\n      const response = await fetch(`${this.baseUrl}/api/v1/upload/${uuid}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include'\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to delete upload');\n      }\n\n      const data = await response.json();\n\n      if (data.status === 'success') {\n        this.showToast('Upload deleted successfully', 'success');\n        this.loadUploads();\n      } else {\n        throw new Error(data.message || 'Failed to delete upload');\n      }\n    } catch (error) {\n      console.error('Error deleting upload:', error);\n      this.showToast('Failed to delete upload', 'error');\n    }\n  }\n\n  /**\n   * Format bytes to human readable size\n   * @param {number} bytes\n   * @returns {string}\n   */\n  formatBytes(bytes) {\n    if (bytes === 0) return '0 B';\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];\n  }\n\n  /**\n   * Truncate string with ellipsis\n   * @param {string} str\n   * @param {number} maxLen\n   * @returns {string}\n   */\n  truncate(str, maxLen) {\n    if (!str) return '';\n    return str.length > maxLen ? str.substring(0, maxLen) + '...' : str;\n  }\n}\n","/**\n * UPLOADS Admin Page Entry Point\n *\n * This file is the entry point for the UPLOADS admin page Vite build.\n * It imports styles and initializes the UploadsPage controller.\n */\n\n// Import styles\nimport './styles/main.scss';\n\n// Import UploadsPage controller\nimport { UploadsPage } from './UploadsPage.js';\n\n/**\n * Initialize the page when DOM is ready\n */\nfunction initPage() {\n  // Get required elements\n  const uploadsTable = document.getElementById('uploadsTable');\n  const uploadsGrid = document.getElementById('uploadsGrid');\n  const pagination = document.getElementById('pagination');\n\n  // Check if elements exist\n  if (!uploadsTable || !uploadsGrid) {\n    console.error('UploadsPage: Required DOM elements not found');\n    return;\n  }\n\n  // Get base URL from global variable (set by Tera template)\n  const baseUrl = window.BASE_URL || '';\n\n  // Get toast function (if Toastify is available)\n  const showToast = createToastFunction();\n\n  // Initialize UploadsPage controller\n  const uploadsController = new UploadsPage({\n    baseUrl,\n    uploadsTable,\n    uploadsGrid,\n    pagination,\n    showToast\n  });\n\n  // Store reference globally for debugging\n  if (typeof window !== 'undefined') {\n    window.uploadsController = uploadsController;\n  }\n}\n\n/**\n * Create toast notification function\n * Uses Toastify if available, falls back to console/alert\n * @returns {Function}\n */\nfunction createToastFunction() {\n  const colors = {\n    success: 'linear-gradient(to right, #00b09b, #96c93d)',\n    error: 'linear-gradient(to right, #ff5f6d, #ffc371)',\n    info: 'linear-gradient(to right, #667eea, #764ba2)'\n  };\n\n  return function showToast(message, type = 'success') {\n    if (typeof Toastify !== 'undefined') {\n      Toastify({\n        text: message,\n        duration: 4000,\n        gravity: 'top',\n        position: 'right',\n        style: {\n          background: colors[type] || colors.info\n        }\n      }).showToast();\n    } else {\n      console.log(`[${type.toUpperCase()}] ${message}`);\n    }\n  };\n}\n\n// Initialize when DOM is ready\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', initPage);\n} else {\n  initPage();\n}\n"],"names":["upload"],"mappings":"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"}