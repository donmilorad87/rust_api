# RabbitMQ Configuration
# Variables will be substituted by entrypoint.sh

# ======================
# Network Configuration
# ======================
listeners.tcp.default = ${RABBITMQ_PORT}

# Management plugin port
management.tcp.port = ${RABBITMQ_MANAGEMENT_PORT}

# ======================
# Default User & VHost
# ======================
default_user = ${RABBITMQ_USER}
default_pass = ${RABBITMQ_PASSWORD}
default_vhost = ${RABBITMQ_VHOST}

# ======================
# Authentication
# ======================
loopback_users = none

# ======================
# Memory & Disk
# ======================
vm_memory_high_watermark.relative = 0.4
disk_free_limit.absolute = 500MB

# ======================
# Connection & Channel
# ======================
heartbeat = 60
channel_max = 2047

# ======================
# Logging
# ======================
log.console = true
log.console.level = info
log.file = false

# ======================
# Management Plugin
# ======================
# Enable legacy metrics collector for management UI compatibility
# The warning about deprecation can be ignored - Prometheus plugin also works on port 15692
management_agent.disable_metrics_collector = false

# Path prefix for reverse proxy
management.path_prefix = /rabbitmq


